git clone --depth 1 https://github.com/zynaps/setup.git /tmp/setup

git clone --depth 1 https://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh
cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc
sed -i -r -e '/^#plugins=/s/^#//' -e '/^plugins=/s/\)$/ bundler\)/' ~/.zshrc
sed -i -e '/^ZSH_THEME=/s/robbyrussell/gentoo/' ~/.zshrc
echo "alias sudo='sudo -E'" > ~/.oh-my-zsh/custom/aliases.zsh
echo "alias l='ls -lA'" >> ~/.oh-my-zsh/custom/aliases.zsh
echo "bindkey '^U' backward-kill-line" > ~/.oh-my-zsh/custom/key-bindings.zsh
echo "setopt noautomenu" > ~/.oh-my-zsh/custom/completion.zsh

echo -e "\n# One editor for all cases\nexport EDITOR=vim" >> ~/.zshrc

cat << EOF >> ~/.zshrc

# Arch Linux way to manage gems
export GEM_HOME=\$(ruby -rubygems -e "puts Gem.user_dir")
export PATH=\$GEM_HOME/bin:\$PATH
EOF

cp /tmp/setup/files/tmux.conf ~/.tmux.conf

git config --global user.name 'Igor Vinokurov'
git config --global user.email zynaps@zynaps.ru
git config --global color.ui auto
curl -Ss -L https://www.gitignore.io/api/vim,macos,linux -o ~/.gitignore
git config --global core.excludesfile ~/.gitignore
git config --global push.default simple

mkdir -p ~/.vim/{autoload,bundle}
curl -Ss -L https://tpo.pe/pathogen.vim -o ~/.vim/autoload/pathogen.vim
for plugin in \
  https://github.com/chriskempson/base16-vim.git \
  https://github.com/tpope/vim-repeat.git \
  https://github.com/tpope/vim-commentary.git \
  https://github.com/ntpeters/vim-better-whitespace.git \
  https://github.com/now/vim-restore-position.git
do
  git clone --depth 1 $plugin ~/.vim/bundle/`basename $plugin` || (echo 'FAIL' && break)
done
cp /tmp/setup/files/vimrc ~/.vimrc
vim -c 'call pathogen#helptags()|quit'
